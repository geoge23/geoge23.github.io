{"componentChunkName":"component---src-templates-portfolio-entry-js","path":"/portfolio/3-late-attendance","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://georgeparks.me"}},"mdx":{"slug":"3-late-attendance","body":"var _excluded = [\"components\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"name\": \"Late Attendance System\",\n  \"shortDesc\": \"A project commissioned by my school to manage late arrivals using a mobile interface. Uses a rolling QR code system to prevent late spoofing\",\n  \"icon\": \"../images/late-checkin-logo.png\",\n  \"type\": \"personal project\",\n  \"images\": [\"../images/late-checkin-1.png\", \"../images/late-checkin-2.png\", \"../images/late-checkin-3.png\"],\n  \"technologies\": [\"NodeJS\", \"Express\", \"TOTP\", \"QR Codes\", \"Digital Signage\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"The Late Attendance System was built as a digital drop-in replacement for the physical late passes used at my school. The project was commissioned by the Woodward Dean of Students following the widespread success of WADaily, and it was designed to reduce the long wait times for late passes on days with particularly bad traffic or other external factors. \"), mdx(\"p\", null, \"To provide students with mobile late passes, the front desk requested a QR-based system. However, such a system with a static QR would allow people to retain the link and use it to acquire late passes without actually checking in. To solve this problem, I utilized a rolling QR system based on the TOTP standard for two-factor authentication. TOTP uses the current time along with a secret key to generate 6-8 digit codes valid for a variable amount of time (typically 30 seconds). These codes can later be authenticated by a server to ensure a user generated a code using the secret key at a specified time. I implemented a premade TOTP library along with some additional algorithms from the TOTP RFC and coupled this code with a QR generation library to create a rolling QR code that regenerates every 30 seconds with a new TOTP code. This webpage was then added to a NodeJS server which injects the TOTP secret key and configuration information that\\u2019s stored on the server, allowing codes to be generated on-device. This site is then displayed on a Raspberry Pi running Screenly, an open-source digital signage program. The Pi is specifically whitelisted for access to the generation portal. By confining the generator site to a device only available to the front desk, it ensures that the key is only accessible to authorized users with access to the machine, preventing a bad actor from generating their own TOTP codes. \"), mdx(\"p\", null, \"When a user scans the generated QR code, they are linked to a URL hosted from the NodeJS server. This URL will contain the currently valid TOTP key from the generator as a query parameter, allowing it to be validated by the server. When a user navigates to this page, the server checks if the incoming TOTP code is valid within 1 timeframe (+/- 30 seconds on default settings) of the current system time. This accounts for any discrepancies in the server\\u2019s time vs the client\\u2019s time. \"), mdx(\"p\", null, \"If this token is valid, the server will then generate a cookie to allow the user to access their late pass throughout the day, even after revisiting the page. However, cookies are user-modifiable, meaning that a malicious actor could edit their cookie to inform the server that their late pass is valid for a period other than the intended one. In order to prevent such activity, the generated cookie contains both the date of validity for the pass and an HMAC signature generated by the secret key on the server. This means that when a client sends their cookie back to the server, the server can validate that signing the date with its key would yield the same HMAC, thus meaning that the cookie was generated by the server and not tampered with client-side. This HMAC approach has the added benefit of removing the need for a database, since the server can cryptographically verify the authenticity of the cookies on the fly.\"), mdx(\"p\", null, \"The check-in pass screen is generated on the server, meaning that either the TOTP code or HMAC cookie can be validated before displaying the date and time of check-in. The pass also incorporates elements making it easy to validate its authenticity, such as the bar on the top. This bar has an animated gradient that cycles through colors, meaning that when a screenshot is taken, the colors will no longer transition. This design choice prevents malicious actors from screenshotting and photoshopping the pass to make it appear valid, since the animated gradient will no longer transition between colors along the top of the screen. The text was also made extra large to accommodate for harsh viewing conditions, ensuring that teachers can easily read the time and date information on the screen.\"), mdx(\"p\", null, \"Following implementation of this system, there was a significant decrease in both wait times for front desk check-in and wasted paper for late notes. Teachers also reported easier experiences validating pass authenticity overall preferred the new system.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"The Late Attendance System was built as a digital drop-in replacement for the physical late passes used at my school. The project was commissioned by the Woodward Dean of Students following theâ€¦","frontmatter":{"name":"Late Attendance System","url":null,"icon":{"childImageSharp":{"fixed":{"src":"/static/a7f709980f74c8d4435853b7d78fc053/497c6/late-checkin-logo.png"}}},"articleImages":null,"technologies":["NodeJS","Express","TOTP","QR Codes","Digital Signage"],"images":[{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/6107e3e428270e4e923bd7caaad68637/bbaa4/late-checkin-1.png","srcSet":"/static/6107e3e428270e4e923bd7caaad68637/47d11/late-checkin-1.png 590w,\n/static/6107e3e428270e4e923bd7caaad68637/3786a/late-checkin-1.png 1180w,\n/static/6107e3e428270e4e923bd7caaad68637/bbaa4/late-checkin-1.png 2360w","sizes":"(min-width: 2360px) 2360px, 100vw"},"sources":[{"srcSet":"/static/6107e3e428270e4e923bd7caaad68637/000fa/late-checkin-1.webp 590w,\n/static/6107e3e428270e4e923bd7caaad68637/cfa9d/late-checkin-1.webp 1180w,\n/static/6107e3e428270e4e923bd7caaad68637/807c3/late-checkin-1.webp 2360w","type":"image/webp","sizes":"(min-width: 2360px) 2360px, 100vw"}]},"width":2360,"height":1640}}},{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/f5d8dc676fc1b4d67b2385bcdbb0d226/7ac30/late-checkin-2.png","srcSet":"/static/f5d8dc676fc1b4d67b2385bcdbb0d226/6764e/late-checkin-2.png 293w,\n/static/f5d8dc676fc1b4d67b2385bcdbb0d226/23115/late-checkin-2.png 585w,\n/static/f5d8dc676fc1b4d67b2385bcdbb0d226/7ac30/late-checkin-2.png 1170w","sizes":"(min-width: 1170px) 1170px, 100vw"},"sources":[{"srcSet":"/static/f5d8dc676fc1b4d67b2385bcdbb0d226/d3cd4/late-checkin-2.webp 293w,\n/static/f5d8dc676fc1b4d67b2385bcdbb0d226/c110f/late-checkin-2.webp 585w,\n/static/f5d8dc676fc1b4d67b2385bcdbb0d226/3434b/late-checkin-2.webp 1170w","type":"image/webp","sizes":"(min-width: 1170px) 1170px, 100vw"}]},"width":1170,"height":2532}}},{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/4861fe835421247043f3147b2b4f6186/7ac30/late-checkin-3.png","srcSet":"/static/4861fe835421247043f3147b2b4f6186/6764e/late-checkin-3.png 293w,\n/static/4861fe835421247043f3147b2b4f6186/23115/late-checkin-3.png 585w,\n/static/4861fe835421247043f3147b2b4f6186/7ac30/late-checkin-3.png 1170w","sizes":"(min-width: 1170px) 1170px, 100vw"},"sources":[{"srcSet":"/static/4861fe835421247043f3147b2b4f6186/d3cd4/late-checkin-3.webp 293w,\n/static/4861fe835421247043f3147b2b4f6186/c110f/late-checkin-3.webp 585w,\n/static/4861fe835421247043f3147b2b4f6186/3434b/late-checkin-3.webp 1170w","type":"image/webp","sizes":"(min-width: 1170px) 1170px, 100vw"}]},"width":1170,"height":2532}}}]}}},"pageContext":{"id":"4fae0a0f-7a57-5458-9b77-9e6738b2a8cb"}},"staticQueryHashes":[]}